{
  "project": "StudioFlow",
  "branchName": "ralph/outstanding-items",
  "description": "Complete remaining items from middle-layer and scale-to-N PRDs: binding coverage verification, content roundtrip integration, sfid migration script, documentation updates, and component-aware proof system.",
  "userStories": [
    {
      "id": "US-R01",
      "title": "Phase 3 verification log (binding coverage)",
      "description": "As a design system maintainer, I want a verification script that reports which element properties would be bound (token or style), unbound, or could-be-style so I can improve coverage before applying in Figma.",
      "acceptanceCriteria": [
        "Script exists at scripts/verify-binding-coverage.mjs runnable via npm run verify:binding-coverage",
        "Reads handoff/code-to-canvas.json and uses conduit-metadata.mjs inferFigmaType and mapping data",
        "Outputs per-sfid list of properties with status BOUND_TOKEN BOUND_STYLE UNBOUND COULD_BE_STYLE to stdout",
        "Writes handoff/binding-coverage.json with generatedAt bindings[] and summary (bound unbound couldBeStyle total)",
        "Output is deterministic (sorted by sfid then property)",
        "npm run check passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Origin: middle-layer PRD US-008. Created scripts/verify-binding-coverage.mjs. Reports 13 bound, 5 unbound, 0 could-be-style."
    },
    {
      "id": "US-R02",
      "title": "Content integration into conduit roundtrip",
      "description": "As a developer, I want content/content.json integrated into the code-to-canvas payload and canvas-to-code apply path so text content roundtrips through Figma.",
      "acceptanceCriteria": [
        "loop-code-to-canvas.mjs reads content/content.json if it exists and includes content field in code-to-canvas.json payload",
        "loop-canvas-to-code.mjs reads content from canvas-to-code.json if present and writes updates back to content/content.json",
        "If content/content.json does not exist both scripts skip content handling silently",
        "npm run conduit:generate succeeds with and without content/content.json",
        "npm run check passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "Origin: scale-to-N PRD US-N04 partial. loop-code-to-canvas includes content field. loop-canvas-to-code merges content back."
    },
    {
      "id": "US-R03",
      "title": "sfid migration script",
      "description": "As a developer migrating to namespaced sfids, I want a script that renames flat sfids to namespaced sfids across source files snapshots and manifest.",
      "acceptanceCriteria": [
        "Script exists at scripts/migrate-sfids.mjs runnable via npm run migrate:sfids",
        "Accepts --map flag pointing to a JSON file with old-to-new sfid mappings",
        "Rewrites occurrences in src/**/*.tsx jsx html and snapshots/*.json and studioflow.manifest.json",
        "Supports --dry-run flag that prints changes without writing files",
        "Prints summary of files modified and replacements made",
        "npm run check passes after migration with correct mapping"
      ],
      "priority": 3,
      "passes": true,
      "notes": "Origin: scale-to-N PRD US-N05 partial. Created scripts/migrate-sfids.mjs with --map and --dry-run."
    },
    {
      "id": "US-R04",
      "title": "Documentation updates for new commands",
      "description": "As a developer or agent, I want AGENT.md and the canonical parity docs updated with all new commands so operational docs are current.",
      "acceptanceCriteria": [
        "AGENT.md Commands section includes sync:push sync:pull scan:project apply:token-map extract:content verify:binding-coverage migrate:sfids",
        "docs/DESIGN_SYSTEM_AND_FIGMA_SYNC.md documents sync:push and sync:pull as the primary operator commands",
        "docs/PARITY_CHANGE_PROGRAM.md captures onboarding and scale requirements including scan:project and apply:token-map",
        "No broken references or stale command names in either file",
        "npm run check passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": "Origin: scale-to-N PRD US-N08 partial. Updated AGENT.md and canonical parity docs with active command paths."
    },
    {
      "id": "US-R05",
      "title": "Component-aware proof system",
      "description": "As a developer or CI pipeline, I want proof generation to support per-component targeting so I can verify individual components at each breakpoint.",
      "acceptanceCriteria": [
        "loop:proof accepts --component flag that filters to sfid namespace (e.g. --component hero captures sfid:hero/* elements)",
        "When --component is passed screenshots save to proof/latest/{component}/{breakpoint}.png",
        "When no --component flag existing full-page behavior is preserved",
        "HTML report includes component name in title when component-filtered",
        "Summary JSON includes component field when filtered",
        "npm run check passes"
      ],
      "priority": 5,
      "passes": true,
      "notes": "Origin: scale-to-N PRD US-N06. Added --component flag, captureComponentScreenshots(), per-component proof directories."
    }
  ]
}
